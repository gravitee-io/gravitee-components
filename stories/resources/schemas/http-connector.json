{
  "type": "object",
  "id": "urn:jsonschema:io:gravitee:connector:http:configuration:HttpConnectorConfiguration",
  "properties": {
    "headers": {
      "type": "array",
      "title": "Headers",
      "items": {
        "type": "object",
        "title": "Header",
        "id": "urn:jsonschema:io:gravitee:connector:http:configuration:HttpHeader",
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "value": {
            "type": "string",
            "title": "Value"
          }
        },
        "required": ["name", "value"]
      }
    },
    "http": {
      "type": "object",
      "title": "HTTP Options",
      "id": "urn:jsonschema:io:gravitee:connector:http:configuration:HttpOptions",
      "properties": {
        "idleTimeout": {
          "type": "integer",
          "title": "Idle timeout (ms)",
          "description": "Maximum time a connection will timeout and be closed if no data is received within the timeout.",
          "default": 60000
        },
        "connectTimeout": {
          "type": "integer",
          "title": "Connect timeout (ms)",
          "description": "Maximum time to connect to the remote host.",
          "default": 5000
        },
        "keepAlive": {
          "title": "Enable keep-alive",
          "description": "Use an HTTP persistent connection to send and receive multiple HTTP requests / responses.",
          "type": "boolean",
          "default": true
        },
        "readTimeout": {
          "type": "integer",
          "title": "Connect timeout (ms)",
          "description": "Maximum time to complete the request (including response).",
          "default": 10000
        },
        "pipelining": {
          "title": "Enable HTTP pipelining",
          "description": "When pipe-lining is enabled requests will be written to connections without waiting for previous responses to return.\n",
          "type": "boolean",
          "default": false
        },
        "maxConcurrentConnections": {
          "type": "integer",
          "title": "Max Concurrent Connections",
          "description": "Maximum pool size for connections.",
          "default": 100
        },
        "useCompression": {
          "title": "Enable compression (gzip, deflate)",
          "description": "The gateway can let the remote http server know that it supports compression, and will be able to handle compressed response bodies.",
          "type": "boolean",
          "default": true
        },
        "followRedirects": {
          "title": "Follow HTTP redirects",
          "description": "When the client receives an 301, 302, 303 or 307 status code, it follows the redirection provided by the Location response header",
          "type": "boolean",
          "default": false
        },
        "clearTextUpgrade": {
          "title": "Clear text upgrade",
          "description": "To complete...",
          "type": "boolean",
          "default": true
        },
        "version": {
          "title": "HTTP Protocol version",
          "description": "The version of the HTTP protocol to use",
          "type": "string",
          "default": "HTTP_1_1",
          "enum": ["HTTP_1_1", "HTTP_2"],
          "x-schema-form": {
            "type": "select",
            "titleMap": {
              "HTTP_1_1": "HTTP 1.1",
              "HTTP_2": "HTTP 2"
            }
          }
        }
      }
    },
    "proxy": {
      "type": "object",
      "title": "Proxy Options",
      "id": "urn:jsonschema:io:gravitee:connector:http:configuration:HttpProxyOptions",
      "properties": {
        "enabled": {
          "type": "boolean",
          "title": "Use proxy",
          "description": "Use proxy",
          "default": false
        },
        "useSystemProxy": {
          "type": "boolean",
          "title": "Use system proxy",
          "description": "Use system proxy",
          "default": false
        },
        "type": {
          "type": "string",
          "title": "Proxy Type",
          "description": "The type of the proxy",
          "default": "HTTP",
          "enum": ["HTTP", "SOCKS4", "SOCKS5"],
          "x-schema-form": {
            "type": "select",
            "titleMap": {
              "HTTP": "HTTP CONNECT proxy",
              "SOCKS4": "SOCKS4/4& tcp proxy",
              "SOCKS5": "SOCKS5 tcp proxy"
            },
            "hidden": [
              {
                "$eq": {
                  "proxy.enabled": false
                }
              }
            ],
            "disabled": [
              {
                "$eq": {
                  "proxy.useSystemProxy": true
                }
              }
            ]
          }
        },
        "host": {
          "type": "string",
          "title": "Proxy host",
          "description": "Proxy host to connect to",
          "x-schema-form": {
            "hidden": [
              {
                "$eq": {
                  "proxy.enabled": false
                }
              }
            ],
            "disabled": [
              {
                "$eq": {
                  "proxy.useSystemProxy": true
                }
              }
            ]
          }
        },
        "port": {
          "type": "integer",
          "title": "Proxy port",
          "description": "Proxy port to connect to",
          "x-schema-form": {
            "hidden": [
              {
                "$eq": {
                  "proxy.enabled": false
                }
              }
            ],
            "disabled": [
              {
                "$eq": {
                  "proxy.useSystemProxy": true
                }
              }
            ]
          }
        },
        "username": {
          "type": "string",
          "title": "Proxy username",
          "description": "Optional proxy username",
          "x-schema-form": {
            "hidden": [
              {
                "$eq": {
                  "proxy.enabled": false
                }
              }
            ],
            "disabled": [
              {
                "$eq": {
                  "proxy.useSystemProxy": true
                }
              }
            ]
          }
        },
        "password": {
          "type": "password",
          "title": "Proxy password",
          "description": "Optional proxy password",
          "x-schema-form": {
            "hidden": [
              {
                "$eq": {
                  "proxy.enabled": false
                }
              }
            ],
            "disabled": [
              {
                "$eq": {
                  "proxy.useSystemProxy": true
                }
              }
            ]
          }
        }
      }
    },
    "ssl": {
      "type": "object",
      "title": "SSL Options",
      "id": "urn:jsonschema:io:gravitee:connector:http:configuration:SslOptions",
      "properties": {
        "hostnameVerifier": {
          "title": "Verify Host",
          "description": "Use to enable host name verification",
          "type": "boolean",
          "default": false
        },
        "trustAll": {
          "title": "Trust all",
          "description": "Use this with caution (if over Internet). The gateway must trust any origin certificates. The connection will still be encrypted but this mode is vulnerable to 'man in the middle' attacks.",
          "type": "boolean",
          "default": false
        },
        "trustStore": {
          "type": "object",
          "title": "Trust store",
          "id": "urn:jsonschema:io:gravitee:connector:http:configuration:SslTrustStoreOptions",
          "properties": {
            "type": {
              "type": "string",
              "title": "Type",
              "description": "The type of the trust store",
              "default": "",
              "enum": ["", "JKS", "PKCS12", "PEM"],
              "x-schema-form": {
                "type": "select",
                "titleMap": {
                  "": "None",
                  "JKS": "Java Trust Store (.jks)",
                  "PKCS12": "PKCS#12 (.p12) / PFX (.pfx)",
                  "PEM": "PREM (.pem)"
                }
              }
            },
            "path": {
              "type": "string",
              "title": "Path to trust store",
              "description": "Path to the trust store file"
            },
            "content": {
              "type": "text",
              "title": "Content",
              "description": "Content"
            },
            "password": {
              "type": "password",
              "title": "Password",
              "description": "Trust store password"
            }
          },
          "x-schema-form": {
            "hidden": [
              {
                "$eq": {
                  "ssl.trustAll": true
                }
              }
            ]
          }
        },
        "keyStore": {
          "type": "object",
          "title": "Key store",
          "id": "urn:jsonschema:io:gravitee:connector:http:configuration:SslKeyStoreOptions",
          "properties": {
            "type": {
              "type": "string",
              "title": "Type",
              "description": "The type of the key store",
              "default": "",
              "enum": ["", "JKS", "PKCS12", "PEM"],
              "x-schema-form": {
                "type": "select",
                "titleMap": {
                  "": "None",
                  "JKS": "Java Trust Store (.jks)",
                  "PKCS12": "PKCS#12 (.p12) / PFX (.pfx)",
                  "PEM": "PREM (.pem)"
                }
              }
            },
            "path": {
              "type": "string",
              "title": "Path to key store",
              "description": "Path to the key store file"
            },
            "content": {
              "type": "text",
              "title": "Content",
              "description": "Content"
            },
            "password": {
              "type": "password",
              "title": "Password",
              "description": "Key store password"
            }
          }
        }
      }
    }
  }
}
